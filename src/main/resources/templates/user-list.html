<!DOCTYPE html>
<html
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <title th:text="${course.code + ' | Students'}">Users</title>
  </head>
  <body>
    <section class="section-user-list" layout:fragment="content">
      <!-- Left: Sidebar -->
      <div class="user-list__sidebar">
        <div class="user-list__sidebar-course__informations">
          <div class="user-list__sidebar-course__information">
            <p class="user-list__sidebar-course__information__heading">
              Course Code:
            </p>
            <p
              class="user-list__sidebar-course__information__value"
              th:text="${course.code}"
            >
              SWE000
            </p>
          </div>
          <div class="user-list__sidebar-course__information">
            <p class="user-list__sidebar-course__information__heading">
              Course Title:
            </p>
            <p
              class="user-list__sidebar-course__information__value"
              th:text="${course.title}"
            >
              Course Title
            </p>
          </div>
          <div class="user-list__sidebar-course__information">
            <p class="user-list__sidebar-course__information__heading">
              Course Owner:
            </p>
            <p
              class="user-list__sidebar-course__information__value"
              th:text="${course.owner}"
            >
              Name Surname
            </p>
          </div>
          <div
            th:if="${#strings.toLowerCase(loggedUser.role).replace('ı', 'i') == 'admin' or #strings.toLowerCase(loggedUser.role).replace('ı', 'i') == 'instructor'}"
            class="user-list__sidebar-course__information user-list__sidebar-course__information--user-management"
          >
            <p class="user-list__sidebar-course__information__heading">
              Add Student:
            </p>
            <form
              th:action="@{/course/add/student}"
              method="post"
              class="form form-add-user"
              th:object="${addStudent}"
              name="add-user"
            >
              <input
                type="hidden"
                name="courseCode"
                th:value="${course.code}"
              />

              <div class="form-group">
                <input
                  type="text"
                  id="userNumber"
                  th:field="${addStudent.number}"
                  placeholder="Number (e.g., B201...)"
                  required
                />
              </div>

              <div class="form-group">
                <input
                  type="text"
                  id="userName"
                  th:field="${addStudent.name}"
                  placeholder="Name"
                  required
                />
              </div>

              <div class="form-group">
                <input
                  type="text"
                  id="userSurname"
                  th:field="${addStudent.surname}"
                  placeholder="Surname"
                  required
                />
              </div>

              <button type="submit" class="btn btn__add-user btn--success">
                Add Student
              </button>
            </form>
          </div>
        </div>
      </div>

      <div class="user-list-wrapper">
        <div class="container-user-list">
          <div class="users">
            <div class="users-header">
              <form th:action="@{/users/search}" method="GET" class="search">
                <input
                  type="text"
                  name="keyword"
                  class="search__field"
                  placeholder="Search..."
                  th:value="${keyword}"
                />
                <input
                  type="hidden"
                  name="courseCode"
                  th:value="${course.getCode()}"
                />

                <!--
                    th:value="${course.getCode()}"
                -->
                <input type="hidden" name="courseCode" />
                <button type="submit" class="search__btn">
                  <ion-icon
                    class="search__icon"
                    name="search-outline"
                  ></ion-icon>
                </button>
              </form>
            </div>

            <div class="user-list">
              <table>
                <colgroup>
                  <col class="col-count" />
                  <col class="col-number" />
                  <col class="col-name" />
                  <col class="col-surname" />
                  <col class="col-role" />
                  <col class="col-actions" />
                </colgroup>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Number</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Role</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    th:each="user, stat : ${users}"
                    th:data-user-number="${user.number}"
                    th:data-related-course="${course.code}"
                  >
                    <td th:text="${stat.count}">#</td>
                    <td th:text="${user.number}">B201202056</td>
                    <td th:text="${user.name}" class="user-list__user-name">
                      Name
                    </td>
                    <td
                      th:text="${user.surname}"
                      class="user-list__user-surname"
                    >
                      Surname
                    </td>
                    <td th:text="${user.role}">Role</td>
                    <td>
                      <button class="delete-user-btn">
                        <ion-icon
                          class="delete-user-btn__icon"
                          name="trash"
                        ></ion-icon>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
